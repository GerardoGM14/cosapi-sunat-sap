<div class="config-page" [class.dashboard-layout]="isInsideDashboard">
  
  <!-- Standard Page Header (Dashboard Only) -->
  <div class="page-header" *ngIf="isInsideDashboard">
    <h1 class="page-title">Configuración SAP</h1>
    <p class="page-subtitle">Ajustes generales del sistema.</p>
  </div>

  <div class="config-card" [class.dashboard-card]="isInsideDashboard">
    
    <div *ngIf="errorMessage || successMessage" class="toast-notification" [class.success]="successMessage && !errorMessage">
      <div class="toast-content">
        <div class="toast-icon">
          <svg *ngIf="errorMessage" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
          <svg *ngIf="successMessage && !errorMessage" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
        </div>
        <div class="toast-text">
          <h4 class="toast-title">{{ errorMessage ? 'Error' : 'Éxito' }}</h4>
          <p class="toast-message">{{ errorMessage || successMessage }}</p>
        </div>
        <button class="toast-close" (click)="errorMessage = ''; successMessage = ''">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
        </button>
      </div>
    </div>
    
    <div class="config-nav" *ngIf="!isInsideDashboard">
        <button class="btn-back-login" (click)="backToLogin()">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
            Regresar al Login
        </button>
    </div>

    <!-- Sección Superior: Imagen/Visual si NO está en Dashboard -->
    <div class="config-visual" *ngIf="!isInsideDashboard">
      <div class="visual-content">
        <h2>Configuración</h2>
        <p>Ajustes generales del sistema.</p>
      </div>
      <div class="visual-overlay"></div>
    </div>

    <!-- Sección Inferior: Contenido Real -->
    <div class="config-content-container" [class.dashboard-mode]="isInsideDashboard">
      
      <div class="sap-card">
        <div class="card-header-gray">
          <div class="header-content">
            <h3 class="card-title">Cuenta Maestra</h3>
            <span class="last-mod">Última mod.: 21/01/2026</span>
          </div>
          <div class="header-actions">
            <button class="btn-edit-header" (click)="toggleEdit()" title="Editar Configuración">
               <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
            </button>
            <button class="btn-save-header" *ngIf="isEditing" (click)="saveConfig()" title="Guardar Cambios">
               <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>
            </button>
          </div>
        </div>
        
        <div class="card-body-custom">
          <div class="form-group">
            <label>Usuario SAP</label>
            <div class="input-wrapper-icon">
              <div class="input-icon-left">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
              </div>
              <input type="text" [(ngModel)]="configData.sap.usuario" [disabled]="!isEditing" placeholder="Ingrese usuario SAP" class="input-with-icon">
            </div>
          </div>
          
          <div class="form-group">
            <label>Contraseña SAP</label>
            <div class="input-wrapper-icon">
              <div class="input-icon-left">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
              </div>
              <input [type]="showSapPassword ? 'text' : 'password'" [(ngModel)]="configData.sap.password" [disabled]="!isEditing" placeholder="Ingrese contraseña" class="input-with-icon">
              <button type="button" class="btn-toggle-pass" (click)="showSapPassword = !showSapPassword" [disabled]="!isEditing">
                <svg *ngIf="!showSapPassword" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                <svg *ngIf="showSapPassword" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>
              </button>
            </div>
          </div>

        </div>
      </div>
    </div>

  </div>
</div>
